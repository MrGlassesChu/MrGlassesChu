<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é«˜æˆ‘æŒ‡å¼• - éˆé­‚ç¥è«­å¡</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Noto+Serif+TC:wght@300;500;700&display=swap');

        :root {
            --card-back-color: #2b3044;
            --card-border: #e8c37e;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤æ‰‹æ©Ÿé»æ“Šè—æ¡† */
        }

        /* --- ä¿®å¾©èƒŒæ™¯å•é¡Œï¼šç¨ç«‹çš„å›ºå®šèƒŒæ™¯å±¤ --- */
        .fixed-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
            background: linear-gradient(160deg, #dbe6f6 0%, #c5d9f1 40%, #e6dee9 100%);
            /* é˜²æ­¢èƒŒæ™¯æ»‘å‹• */
            background-attachment: fixed; 
        }

        body {
            font-family: 'Noto Serif TC', serif;
            min-height: 100vh; /* æ”¹ç”¨ min-height é¿å…æˆªæ–· */
            overflow: hidden;
            color: #4a4a4a;
            position: relative;
        }

        /* --- æ°›åœå±¤ --- */
        .atmosphere {
            position: fixed; /* æ”¹ç‚º fixed */
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -5;
            pointer-events: none;
        }

        .cloud {
            position: absolute;
            background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.6;
            animation: floatCloud 25s infinite alternate ease-in-out;
            will-change: transform; /* æ•ˆèƒ½å„ªåŒ– */
        }
        .c1 { width: 60vw; height: 60vw; top: -10%; left: -10%; animation-duration: 30s; }
        .c2 { width: 50vw; height: 50vw; bottom: -10%; right: -10%; animation-duration: 35s; background: radial-gradient(circle, rgba(230,220,255,0.5) 0%, rgba(255,255,255,0) 70%); }
        .c3 { width: 30vw; height: 30vw; top: 40%; left: 30%; animation-duration: 20s; opacity: 0.3; }

        .sparkles {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(white 1px, transparent 1px),
                radial-gradient(rgba(255,255,255,0.8) 2px, transparent 2px);
            background-size: 100px 100px, 200px 200px;
            background-position: 0 0, 40px 60px;
            opacity: 0.3;
            animation: twinkle 5s infinite linear;
        }

        @keyframes floatCloud {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 20px); }
        }
        @keyframes twinkle {
            0% { opacity: 0.2; transform: translateY(0); }
            50% { opacity: 0.4; }
            100% { opacity: 0.2; transform: translateY(-20px); }
        }

        /* --- ä¸»å®¹å™¨ --- */
        .app-container {
            width: 100%;
            max-width: 1000px;
            height: 100vh; /* é€™è£¡ä¿æŒ 100vh è®“å…§å®¹å±…ä¸­ */
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin: 0 auto;
        }

        .screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.6s ease, transform 0.6s ease;
            opacity: 0;
            pointer-events: none;
            padding: 20px;
            z-index: 1;
            /* éš±è—æœªæ¿€æ´»çš„é é¢ä»¥é˜²å¹²æ“¾é»æ“Š */
            visibility: hidden; 
        }

        .screen.active {
            opacity: 1;
            visibility: visible;
            pointer-events: all;
            z-index: 10;
        }

        /* --- 1. é¦–é  Intro --- */
        .intro-content {
            text-align: center;
            background: rgba(255, 255, 255, 0.45);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px); /* Safari æ”¯æ´ */
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 1px solid rgba(255,255,255,0.6);
        }

        .intro-content h1 {
            font-size: 2.8rem;
            color: #554c6b;
            margin-bottom: 1rem;
            font-family: 'Cinzel', serif;
            letter-spacing: 3px;
        }

        .intro-content p {
            font-size: 1.1rem;
            color: #6a6a8a;
            margin-bottom: 2.5rem;
            line-height: 1.8;
            max-width: 500px;
        }

        .btn {
            padding: 16px 45px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #fff 0%, #f3e7ff 100%);
            border: 1px solid #d4c1eb;
            border-radius: 50px;
            color: #6b5b95;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(107, 91, 149, 0.15);
            transition: transform 0.2s;
            font-family: 'Noto Serif TC', serif;
            font-weight: 500;
        }

        .btn:active {
            transform: scale(0.95);
        }

        /* --- 2. æŠ½å¡å€ Spread (ä¿®å¾©äº‚è·³çš„æ ¸å¿ƒå€) --- */
        .instruction {
            position: absolute;
            top: 12%;
            font-size: 1.3rem;
            color: #554c6b;
            text-shadow: 0 0 10px rgba(255,255,255,0.8);
            letter-spacing: 1px;
            animation: fadeIn 2s ease;
            text-align: center;
            width: 100%;
        }

        .card-spread-container {
            position: relative;
            width: 100%;
            height: 380px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin-top: 50px;
            perspective: 1000px;
        }

        /* å¡ç‰‡æ’æ§½ï¼šè² è²¬ã€Œä½ç½®ã€èˆ‡ã€Œæ—‹è½‰ã€ (ä¸åŸ·è¡Œå‹•ç•«) */
        .card-slot {
            position: absolute;
            width: 100px;
            height: 170px;
            transform-origin: bottom center;
            cursor: pointer;
            z-index: 10;
            /* è®“è®Šæ›æ›´å¹³æ»‘ */
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            /* è§£æ±ºæ‰‹æ©Ÿä¸Šçš„é–ƒçˆå•é¡Œ */
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        /* æ‡¸åœ/é¸ä¸­æ•ˆæœï¼šæ•´å€‹æ’æ§½æ”¾å¤§ */
        .card-slot:hover {
            z-index: 100 !important;
            transform: translateY(-40px) scale(1.15) !important;
        }

        /* å¡ç‰‡å¯¦é«”ï¼šè² è²¬ã€Œåœ–æ¡ˆã€èˆ‡ã€Œå‘¼å¸å‹•ç•«ã€ (èˆ‡ä½ç½®åˆ†é›¢) */
        .card-back-inner {
            width: 100%;
            height: 100%;
            background: var(--card-back-color);
            border-radius: 8px;
            border: 2px solid var(--card-border);
            box-shadow: -2px 5px 15px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: 
                radial-gradient(circle at 50% 30%, rgba(232, 195, 126, 0.3) 2px, transparent 2px),
                linear-gradient(to bottom, #2b3044 0%, #1a1d2e 100%);
            background-size: 20px 20px, 100% 100%;
            position: relative;
            
            /* é€™è£¡åŸ·è¡Œå‘¼å¸å‹•ç•«ï¼Œä¸æœƒå½±éŸ¿çˆ¶å±¤çš„æ—‹è½‰ */
            animation: breathe 4s infinite ease-in-out;
            will-change: transform;
        }

        .card-back-inner::after {
            content: 'ğŸª¶';
            font-size: 2.5rem;
            color: rgba(232, 195, 126, 0.3);
            filter: drop-shadow(0 0 5px rgba(255,215,0,0.5));
        }

        /* å‘¼å¸å‹•ç•« Keyframes */
        @keyframes breathe {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-6px); }
            100% { transform: translateY(0px); }
        }

        /* --- 3. çµæœé  Result --- */
        .result-wrapper {
            perspective: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .result-card-container {
            width: 280px;
            height: 480px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: rotateY(180deg);
            margin-bottom: 30px;
        }

        .result-card-container.flipped {
            transform: rotateY(0deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            overflow: hidden;
            -webkit-backface-visibility: hidden; /* Safari Fix */
        }

        .card-face-back {
            background: var(--card-back-color);
            border: 4px solid var(--card-border);
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotateY(180deg);
        }
        
        .card-face-back::after {
            content: 'âœ¨';
            font-size: 4rem;
        }

        .card-face-front {
            background: #fff;
            transform: rotateY(0deg);
            display: flex;
            flex-direction: column;
            border: 8px solid #fff;
        }

        /* ç‰Œé¢è¨­è¨ˆ */
        .art-frame {
            flex: 1.2;
            background: #fdfbf7;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .art-bg {
            position: absolute;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle, var(--glow-color) 0%, transparent 70%);
            opacity: 0.4;
            animation: pulseLight 4s infinite ease-in-out;
        }

        .art-icon {
            font-size: 6rem;
            z-index: 2;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1));
            transform: scale(0.9);
        }

        .text-frame {
            flex: 1;
            padding: 20px 25px;
            background: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .card-title {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem;
            color: #333;
            margin-bottom: 12px;
            font-weight: 700;
            border-bottom: 1px solid var(--card-border);
            padding-bottom: 8px;
            width: 100%;
        }

        .card-msg {
            font-size: 1rem;
            color: #555;
            line-height: 1.6;
            font-style: italic;
        }
        
        .card-id {
            position: absolute;
            bottom: 5px;
            font-size: 0.7rem;
            color: #ccc;
            letter-spacing: 2px;
        }

        @keyframes pulseLight {
            0%, 100% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.2); opacity: 0.6; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Mobile Adapt --- */
        @media (max-width: 600px) {
            .intro-content { width: 90%; padding: 30px 20px; }
            .card-spread-container { height: 320px; margin-top: 30px; }
            .card-slot { width: 80px; height: 140px; } /* ç¨å¾®åŠ å¤§æ‰‹æ©Ÿç‰ˆå¡ç‰‡ */
            .result-card-container { width: 85vw; height: 60vh; max-height: 480px; }
            .intro-content h1 { font-size: 2rem; }
            .instruction { font-size: 1.1rem; top: 10%; }
            .art-icon { font-size: 5rem; }
        }
    </style>
</head>
<body>

    <div class="fixed-background"></div>

    <div class="atmosphere">
        <div class="cloud c1"></div>
        <div class="cloud c2"></div>
        <div class="cloud c3"></div>
        <div class="sparkles"></div>
    </div>

    <div class="app-container">
        
        <div id="intro-screen" class="screen active">
            <div class="intro-content">
                <h1>SOUL ORACLE</h1>
                <p>è¦ªæ„›çš„éˆé­‚ï¼Œå®‡å®™æœ‰è¨Šæ¯è¦å‚³éçµ¦ä½ ã€‚<br>è«‹é–‰ä¸Šé›™çœ¼ï¼Œæ·±å‘¼å¸ä¸‰æ¬¡ï¼Œ<br>åœ¨å¿ƒä¸­é»˜æƒ³ä½ çš„å•é¡Œã€‚</p>
                <button class="btn" onclick="startDivination()">é–‹å§‹é€£çµ</button>
            </div>
        </div>

        <div id="spread-screen" class="screen">
            <div class="instruction">è«‹æ†‘ç›´è¦ºï¼Œé»æ“Šä¸€å¼µç™¼å…‰çš„ç‰Œ</div>
            <div class="card-spread-container" id="card-spread">
                </div>
        </div>

        <div id="result-screen" class="screen">
            <div class="result-wrapper">
                <div class="result-card-container" id="result-card">
                    <div class="card-face card-face-back"></div>
                    <div class="card-face card-face-front">
                        <div class="art-frame">
                            <div class="art-bg" id="res-bg"></div>
                            <div class="art-icon" id="res-icon">ğŸŒŸ</div>
                        </div>
                        <div class="text-frame">
                            <div class="card-title" id="res-title">Title</div>
                            <div class="card-msg" id="res-text">Text content...</div>
                            <div class="card-id">GUIDANCE</div>
                        </div>
                    </div>
                </div>
                <button class="btn" onclick="resetApp()" style="margin-top: 30px;">æ„Ÿè¬æŒ‡å¼•</button>
            </div>
        </div>

    </div>

    <script>
        const oracleDeck = [
            { t: "ç¥è–ç§©åº", c: "#e0c3fc", i: "ğŸ•Šï¸", m: "ä¸€åˆ‡éƒ½åœ¨å®Œç¾çš„å®‰æ’ä¸­ï¼Œå³ä½¿ç¾åœ¨çœ‹ä¼¼æ··äº‚ã€‚è«‹ä¿¡ä»»å®‡å®™çš„æ™‚æ©Ÿï¼Œæ”¾ä¸‹æ§åˆ¶ï¼Œä½ æ­£è¢«æº«æŸ”åœ°å¼•å°è‘—ã€‚" },
            { t: "å…§åœ¨æ™ºæ…§", c: "#a1c4fd", i: "ğŸ‘ï¸", m: "ä½ å°‹æ±‚çš„ç­”æ¡ˆä¸åœ¨å¤–åœ¨ï¼Œè€Œæ˜¯åœ¨ä½ å¿ƒä¸­ã€‚å®‰éœä¸‹ä¾†ï¼Œè†è½é‚£å¾®å°è€Œå …å®šçš„è²éŸ³ã€‚" },
            { t: "ç™‚ç™’ä¹‹å…‰", c: "#d4fc79", i: "âœ¨", m: "å…è¨±è‡ªå·±ä¼‘æ¯ã€‚å¤§å¤©ä½¿æ‹‰æ–çˆ¾çš„ç¶ è‰²å…‰èŠ’æ­£åœ¨åŒ…åœä½ ï¼ŒèˆŠæœ‰çš„å‚·ç—›æ­£åœ¨è½‰åŒ–ç‚ºæ™ºæ…§ã€‚" },
            { t: "å±•ç¿…é«˜é£›", c: "#fbc2eb", i: "ğŸ¦‹", m: "ä½ å·²ç¶“æº–å‚™å¥½äº†ã€‚ä¸è¦å®³æ€•å±•ç¾ä½ çš„çœŸå¯¦è‰²å½©ï¼Œè›»è®Šçš„éç¨‹é›–ç„¶è‰±è¾›ï¼Œä½†çµæœå°‡ç„¡æ¯”ç¾éº—ã€‚" },
            { t: "è±ç››ä¹‹æµ", c: "#ffd1ff", i: "ğŸ’", m: "åŒ±ä¹åªæ˜¯å¹»è±¡ã€‚æ•é–‹å¿ƒèƒ¸æ¥æ”¶ï¼Œå®‡å®™æƒ³è¦çµ¦ä½ çš„é æ¯”ä½ æƒ³åƒçš„æ›´å¤šã€‚" },
            { t: "å®ˆè­·å¤©ä½¿", c: "#c2e9fb", i: "ğŸ‘¼", m: "ä½ ä¸¦ä¸å­¤å–®ã€‚ç•¶ä½ æ„Ÿåˆ°ç„¡åŠ©æ™‚ï¼Œå‘¼å–šæˆ‘å€‘ï¼Œæˆ‘å€‘ä¸€ç›´åœ¨ä½ èº«é‚Šå®ˆè­·è‘—ä½ ã€‚" },
            { t: "å¯¬æ•", c: "#ff9a9e", i: "â¤ï¸", m: "å¯¬æ•ä¸æ˜¯ç‚ºäº†å°æ–¹ï¼Œè€Œæ˜¯ç‚ºäº†é‡‹æ”¾ä½ è‡ªå·±ã€‚å‰ªæ–·æ²ˆé‡çš„é–éˆï¼Œè®“æ„›é‡æ–°æµå‹•ã€‚" },
            { t: "é¡¯åŒ–åŠ›é‡", c: "#84fab0", i: "ğŸŒŸ", m: "ä½ çš„æ€æƒ³èˆ‡èªè¨€å…·æœ‰å‰µé€ åŠ›ã€‚å°ˆæ³¨æ–¼ä½ ã€Œæƒ³è¦ã€çš„ï¼Œè€Œä¸æ˜¯ä½ ææ‡¼çš„ã€‚" },
            { t: "è€å¿ƒç­‰å¾…", c: "#a6c0fe", i: "â³", m: "ç¨®å­åœ¨åœŸè£¡ç™¼èŠ½éœ€è¦æ™‚é–“ã€‚ç¾åœ¨çœ‹ä¼¼åœæ»¯ï¼Œå…¶å¯¦æ˜¯æ ¹åŸºåœ¨æ‰æ·±ã€‚ä¿æŒä¿¡å¿ƒã€‚" },
            { t: "å‹‡æ°£", c: "#f6d365", i: "ğŸ¦", m: "é¢å°ææ‡¼ï¼Œä½ æœƒç™¼ç¾å®ƒåªæ˜¯ä¸€éš»ç´™è€è™ã€‚ä½ æ¯”ä½ æƒ³åƒçš„æ›´å¼·å¤§ã€æ›´å‹‡æ•¢ã€‚" },
            { t: "éˆé­‚ä¼´ä¾¶", c: "#ffdde1", i: "ğŸ¤", m: "ä¸€æ®µé‡è¦çš„é—œä¿‚å³å°‡é€²å…¥æˆ–æ·±åŒ–ã€‚é€™æ˜¯ä¸€é¢é¡å­ï¼Œå¹«åŠ©ä½ çœ‹è¦‹æ›´å®Œæ•´çš„è‡ªå·±ã€‚" },
            { t: "ç´”çœŸ", c: "#e0c3fc", i: "ğŸ¦„", m: "ç”¨å­©å­çš„çœ¼ç›çœ‹ä¸–ç•Œã€‚æ”¾ä¸‹éå¤šçš„åˆ†æèˆ‡è©•åˆ¤ï¼Œç”Ÿæ´»è™•è™•éƒ½æ˜¯å¥‡è¹Ÿã€‚" },
            { t: "ç•Œç·š", c: "#fda085", i: "ğŸ›¡ï¸", m: "æ„›è‡ªå·±åŒ…å«äº†è¨­ç«‹å¥åº·çš„ç•Œç·šã€‚å°ä»–äººèªªã€Œä¸ã€ï¼Œæœ‰æ™‚æ˜¯å°è‡ªå·±èªªã€Œæ˜¯ã€ã€‚" },
            { t: "é †æµè€Œè¡Œ", c: "#89f7fe", i: "ğŸŒŠ", m: "ä¸è¦é€†æµè€Œä¸Šã€‚æ”¾é¬†èº«é«”ï¼Œéš¨æ³¢é€æµï¼Œç”Ÿå‘½ä¹‹æ²³æœƒå°‡ä½ å¸¶å¾€æœ€é©åˆä½ çš„å½¼å²¸ã€‚" },
            { t: "æ„Ÿæ©", c: "#f5efef", i: "ğŸ™", m: "æ„Ÿæ©æ˜¯æœ€é«˜é »ç‡çš„æŒ¯å‹•ã€‚ç´°æ•¸ä½ æ“æœ‰çš„ç¾å¥½ï¼Œæ›´å¤šç¾å¥½å°±æœƒè¢«å¸å¼•è€Œä¾†ã€‚" },
            { t: "å¤©è³¦", c: "#ffecd2", i: "ğŸ", m: "ä½ å¸¶è‘—ç¨ç‰¹çš„ç¦®ç‰©ä¾†åˆ°ä¸–ä¸Šã€‚ä¸è¦éš±è—ä½ çš„å…‰èŠ’ï¼Œä¸–ç•Œéœ€è¦ä½ çš„è²¢ç»ã€‚" },
            { t: "è½‰å½", c: "#cfd9df", i: "â†©ï¸", m: "å¦‚æœå‰æ–¹è·¯ä¸é€šï¼Œé‚£æ˜¯ä¸€å€‹ä¿è­·ã€‚è½‰å€‹å½ï¼Œæ›´å¥½çš„é¢¨æ™¯åœ¨å¦ä¸€æ¢è·¯ä¸Šã€‚" },
            { t: "å–œæ‚…", c: "#fff1eb", i: "ğŸ˜‚", m: "åš´è‚…ä¸ä»£è¡¨éˆæ€§ã€‚å¤§ç¬‘æ˜¯æœ€å¥½çš„è—¥ï¼Œå»åšè®“ä½ æœƒå¿ƒä¸€ç¬‘çš„äº‹æƒ…å§ï¼" },
            { t: "éœå¿ƒ", c: "#dad4ec", i: "ğŸ§˜", m: "å¤–ç•Œçš„è²éŸ³å¤ªåµé›œäº†ã€‚æ¯å¤©èŠ±äº”åˆ†é˜ç¨è™•ï¼Œä½ æœƒåœ¨å¯§éœä¸­æ‰¾å›åŠ›é‡ã€‚" },
            { t: "å¤¢å¢ƒ", c: "#30cfd0", i: "ğŸŒ™", m: "ç•™æ„ä½ çš„å¤¢å¢ƒï¼Œæ½›æ„è­˜æ­£åœ¨å‚³éé‡è¦çš„è¨Šæ¯ã€‚åºŠé‚Šæ”¾ä¸€æ”¯ç­†ï¼Œè¨˜éŒ„ä¸‹ä¾†ã€‚" },
            { t: "è‡ªç„¶", c: "#96e6a1", i: "ğŸŒ¿", m: "å»èµ¤è…³è¸©åœ¨è‰åœ°ä¸Šï¼Œå»æ“æŠ±ä¸€æ£µæ¨¹ã€‚å¤§åœ°çš„èƒ½é‡èƒ½å¹«åŠ©ä½ è½åœ°èˆ‡å……é›»ã€‚" },
            { t: "æ”¾æ‰‹", c: "#fdfbfb", i: "ğŸ‚", m: "åƒç§‹å¤©çš„æ¨¹æœ¨ä¸€æ¨£ï¼Œå„ªé›…åœ°æ”¾æ‰‹ä¸å†æœå‹™æ–¼ä½ çš„äº‹ç‰©ã€‚ç©ºå‡ºçš„ç©ºé–“å°‡è¿ä¾†æ–°ç”Ÿã€‚" },
            { t: "è‡ªæˆ‘åƒ¹å€¼", c: "#fddb92", i: "ğŸ‘‘", m: "ä½ çš„åƒ¹å€¼ä¸å–æ±ºæ–¼ä½ çš„æˆå°±æˆ–ä»–äººçš„è©•åƒ¹ã€‚ä½ æœ¬èº«å°±æ˜¯ç„¡åƒ¹ä¹‹å¯¶ã€‚" },
            { t: "è¡Œå‹•", c: "#ff758c", i: "ğŸš€", m: "ç¥ˆç¦±ä¹‹å¾Œï¼Œéœ€è¦é…åˆè¡Œå‹•ã€‚é‚å‡ºé‚£å°å°çš„ä¸€æ­¥ï¼Œå®‡å®™æœƒçå‹µä½ çš„ä¸»å‹•ã€‚" },
            { t: "å¹³è¡¡", c: "#a8edea", i: "âš–ï¸", m: "æª¢è¦–ä½ çš„ç”Ÿæ´»ï¼šå·¥ä½œèˆ‡ä¼‘æ¯ã€çµ¦äºˆèˆ‡æ¥æ”¶æ˜¯å¦å¤±è¡¡ï¼Ÿå›æ­¸ä¸­å¿ƒã€‚" },
            { t: "æ„›", c: "#ffc3a0", i: "ğŸ’–", m: "é€™ä¸€åˆ‡å•é¡Œçš„ç­”æ¡ˆéƒ½æ˜¯ã€Œæ„›ã€ã€‚ç”¨æ„›å›æ‡‰é€™å€‹ç‹€æ³ï¼Œå¥‡è¹Ÿå°±æœƒç™¼ç”Ÿã€‚" },
            { t: "çœŸç›¸", c: "#a18cd1", i: "ğŸ”¦", m: "æ‘˜ä¸‹é¢å…·ï¼Œèª å¯¦é¢å°è‡ªå·±ã€‚çœŸç›¸é›–ç„¶æœ‰æ™‚åˆºçœ¼ï¼Œä½†å®ƒæ˜¯è‡ªç”±çš„å”¯ä¸€é€”å¾‘ã€‚" },
            { t: "æ…¶ç¥", c: "#ffafbd", i: "ğŸ‰", m: "ä¸è¦ç­‰åˆ°å¤§æˆå°±æ‰æ…¶ç¥ã€‚ç‚ºä½ ä»Šå¤©çš„å°å°é€²æ­¥å–é‡‡ï¼Œå–œæ‚…å¸å¼•å–œæ‚…ã€‚" },
            { t: "ç›´è¦º", c: "#8ec5fc", i: "ğŸ”®", m: "é‚£ä¸€é–ƒè€Œéçš„å¿µé ­ï¼Œæ˜¯å¤©ä½¿çš„ç§èªã€‚ç›¸ä¿¡ä½ çš„ç¬¬ä¸€ç›´è¦ºï¼Œé‚è¼¯å¸¸å¸¸æœƒé¨™äººã€‚" },
            { t: "å®¶åº­", c: "#fbc7d4", i: "ğŸ ", m: "å®¶åº­èª²é¡Œæ­£åœ¨æµ®ç¾ã€‚å¸¶è‘—æ„›èˆ‡ç†è§£å»åŒ–è§£ä¸–ä»£çš„æ¥­åŠ›ï¼Œä½ æ˜¯é‚£å€‹æ”¹è®Šçš„èµ·é»ã€‚" },
            { t: "ç°¡å–®", c: "#e6e9f0", i: "âšª", m: "æŠŠäº‹æƒ…ç°¡å–®åŒ–ã€‚ä½ æŠŠå•é¡Œæƒ³å¾—å¤ªè¤‡é›œäº†ï¼Œå…¶å¯¦è§£æ±ºæ–¹æ¡ˆå–®ç´”è€Œç›´æ¥ã€‚" },
            { t: "é‡ç”Ÿ", c: "#d299c2", i: "ğŸ”¥", m: "åƒé³³å‡°ä¸€æ¨£ï¼Œåœ¨ç°ç‡¼ä¸­é‡ç”Ÿã€‚ä¸è¦å“€æ‚¼éå»ï¼Œæ“æŠ±å…¨æ–°çš„ä½ ã€‚" },
            { t: "ä¿è­·", c: "#4facfe", i: "ğŸ§¿", m: "ä½ è¢«é‡‘è‰²çš„å…‰ç›¾ä¿è­·è‘—ã€‚è² é¢èƒ½é‡ç„¡æ³•ä¾µå…¥ï¼Œè«‹å®‰å¿ƒåœ°ç™¼å…‰ã€‚" }
        ];

        let isAnimating = false;

        function switchScreen(id) {
            document.querySelectorAll('.screen').forEach(el => {
                el.classList.remove('active');
                el.style.opacity = 0;
            });
            const target = document.getElementById(id);
            target.classList.add('active');
            setTimeout(() => target.style.opacity = 1, 50);
        }

        function startDivination() {
            renderSpread();
            switchScreen('spread-screen');
        }

        function renderSpread() {
            const container = document.getElementById('card-spread');
            container.innerHTML = '';
            
            const isMobile = window.innerWidth < 600;
            const displayCount = isMobile ? 18 : 28;
            
            const totalArc = isMobile ? 80 : 100;
            const startAngle = -totalArc / 2;
            const step = totalArc / (displayCount - 1);

            for (let i = 0; i < displayCount; i++) {
                const cardSlot = document.createElement('div');
                cardSlot.className = 'card-slot';
                
                // è¨ˆç®—ä½ç½®èˆ‡è§’åº¦ (åªåŸ·è¡Œä¸€æ¬¡ï¼Œéœæ…‹)
                let angle = startAngle + (step * i);
                
                // éš¨æ©Ÿå¾®èª¿
                const randomAngleJitter = (Math.random() * 4) - 2;
                const finalAngle = angle + randomAngleJitter;
                
                let baseTranslateY = Math.abs(finalAngle) * (isMobile ? 1.2 : 1.5);
                const randomYJitter = (Math.random() * 10) - 5; 
                let finalTranslateY = baseTranslateY + randomYJitter;

                cardSlot.style.zIndex = i;
                // çˆ¶å±¤ï¼šåªè² è²¬å®šä½ï¼Œä¸è² è²¬å‘¼å¸å‹•ç•«
                cardSlot.style.transform = `rotate(${finalAngle}deg) translateY(${finalTranslateY}px)`;

                // å…§å±¤ï¼šè² è²¬å¤–è§€å’Œå‘¼å¸å‹•ç•«
                const cardInner = document.createElement('div');
                cardInner.className = 'card-back-inner';
                // è¨­å®šéš¨æ©Ÿçš„å‹•ç•«å»¶é²ï¼Œè®“å¤§å®¶ä¸è¦ä¸€èµ·å‹•
                cardInner.style.animationDelay = `${Math.random() * 2}s`;
                
                cardSlot.appendChild(cardInner);

                cardSlot.onclick = function() {
                    if(isAnimating) return;
                    
                    // é»æ“Šç‰¹æ•ˆï¼šçˆ¶å±¤æ”¹è®Š Transform
                    this.style.transition = "all 0.4s ease";
                    this.style.transform = `translateY(-150px) scale(1.3) rotate(0deg)`;
                    this.style.opacity = '0';
                    
                    pickCard();
                };

                container.appendChild(cardSlot);
            }
        }

        function pickCard() {
            isAnimating = true;
            const randomIndex = Math.floor(Math.random() * oracleDeck.length);
            const data = oracleDeck[randomIndex];

            document.getElementById('res-title').innerText = data.t;
            document.getElementById('res-text').innerText = data.m;
            document.getElementById('res-icon').innerText = data.i;
            document.getElementById('res-bg').style.setProperty('--glow-color', data.c);

            setTimeout(() => {
                switchScreen('result-screen');
                setTimeout(() => {
                    document.getElementById('result-card').classList.add('flipped');
                    isAnimating = false;
                }, 300);
            }, 600);
        }

        function resetApp() {
            document.getElementById('result-card').classList.remove('flipped');
            setTimeout(() => {
                switchScreen('intro-screen');
            }, 600);
        }
    </script>
</body>
</html>
        .atmosphere {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .cloud {
            position: absolute;
            background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.6;
            animation: floatCloud 25s infinite alternate ease-in-out;
        }
        .c1 { width: 60vw; height: 60vw; top: -10%; left: -10%; animation-duration: 30s; }
        .c2 { width: 50vw; height: 50vw; bottom: -10%; right: -10%; animation-duration: 35s; background: radial-gradient(circle, rgba(230,220,255,0.5) 0%, rgba(255,255,255,0) 70%); }
        .c3 { width: 30vw; height: 30vw; top: 40%; left: 30%; animation-duration: 20s; opacity: 0.3; }

        .sparkles {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(white 1px, transparent 1px),
                radial-gradient(rgba(255,255,255,0.8) 2px, transparent 2px);
            background-size: 100px 100px, 200px 200px;
            background-position: 0 0, 40px 60px;
            opacity: 0.3;
            animation: twinkle 5s infinite linear;
        }

        @keyframes floatCloud {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 20px); }
        }
        @keyframes twinkle {
            0% { opacity: 0.2; transform: translateY(0); }
            50% { opacity: 0.4; }
            100% { opacity: 0.2; transform: translateY(-20px); }
        }

        /* --- ä¸»å®¹å™¨ --- */
        .app-container {
            width: 100%;
            max-width: 1000px; /* åŠ å¯¬ä»¥å®¹ç´æ›´å¤šç‰Œ */
            height: 100vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease, transform 0.8s ease;
            opacity: 0;
            pointer-events: none;
            padding: 20px;
            z-index: 1;
        }

        .screen.active {
            opacity: 1;
            pointer-events: all;
            z-index: 10;
        }

        /* --- 1. é¦–é  Intro --- */
        .intro-content {
            text-align: center;
            background: rgba(255, 255, 255, 0.4);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .intro-content h1 {
            font-size: 2.8rem;
            color: #554c6b;
            margin-bottom: 1rem;
            font-family: 'Cinzel', serif;
            letter-spacing: 3px;
        }

        .intro-content p {
            font-size: 1.1rem;
            color: #6a6a8a;
            margin-bottom: 2.5rem;
            line-height: 1.8;
            max-width: 500px;
        }

        .btn {
            padding: 16px 45px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #fff 0%, #f3e7ff 100%);
            border: 1px solid #d4c1eb;
            border-radius: 50px;
            color: #6b5b95;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(107, 91, 149, 0.15);
            transition: all 0.3s ease;
            font-family: 'Noto Serif TC', serif;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0) 100%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(107, 91, 149, 0.25);
            color: #4a3b70;
        }
        
        .btn:hover::before {
            transform: translateX(100%);
        }

        /* --- 2. æŠ½å¡å€ Spread --- */
        .instruction {
            position: absolute;
            top: 15%;
            font-size: 1.3rem;
            color: #554c6b;
            text-shadow: 0 0 10px rgba(255,255,255,0.8);
            letter-spacing: 1px;
            animation: fadeIn 2s ease;
        }

        .card-spread-container {
            position: relative;
            width: 100%;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin-top: 100px;
        }

        .card-slot {
            position: absolute;
            width: 100px;
            height: 170px;
            transform-origin: bottom center;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), z-index 0s;
        }
        
        /* æ‡¸åœæ•ˆæœï¼šæ•´å¼µå¡ç‰‡å¾€ä¸Šæµ® */
        .card-slot:hover {
            z-index: 100 !important;
            transform: translateY(-30px) scale(1.1) !important; 
        }

        .card-back {
            width: 100%;
            height: 100%;
            background: var(--card-back-color);
            border-radius: 8px;
            border: 2px solid var(--card-border);
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: 
                radial-gradient(circle at 50% 30%, rgba(232, 195, 126, 0.3) 2px, transparent 2px),
                linear-gradient(to bottom, #2b3044 0%, #1a1d2e 100%);
            background-size: 20px 20px, 100% 100%;
            position: relative;
            overflow: hidden;
        }
        
        /* ç‰ŒèƒŒåœ–é¨° - ç°¡å–®çš„å¹¾ä½•å¤©ä½¿æš—ç¤º */
        .card-back::after {
            content: 'ğŸª¶'; /* ç¾½æ¯› */
            font-size: 2.5rem;
            color: rgba(232, 195, 126, 0.3);
            filter: drop-shadow(0 0 5px rgba(255,215,0,0.5));
        }

        .card-back::before {
            content: '';
            position: absolute;
            border: 1px solid rgba(255,255,255,0.1);
            top: 5px; left: 5px; right: 5px; bottom: 5px;
            border-radius: 5px;
        }

        /* --- 3. çµæœé  Result --- */
        .result-wrapper {
            perspective: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .result-card-container {
            width: 280px;
            height: 480px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: rotateY(180deg);
            margin-bottom: 30px;
        }

        .result-card-container.flipped {
            transform: rotateY(0deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .card-face-back {
            background: var(--card-back-color);
            border: 4px solid var(--card-border);
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotateY(180deg); /* åˆå§‹ç‹€æ…‹ */
        }
        
        .card-face-back::after {
            content: 'âœ¨';
            font-size: 4rem;
        }

        .card-face-front {
            background: #fff;
            transform: rotateY(0deg);
            display: flex;
            flex-direction: column;
            border: 8px solid #fff;
        }

        /* ç‰Œé¢è¨­è¨ˆ */
        .art-frame {
            flex: 1.2;
            background: #fdfbf7;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .art-bg {
            position: absolute;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle, var(--glow-color) 0%, transparent 70%);
            opacity: 0.4;
            animation: pulseLight 4s infinite ease-in-out;
        }

        .art-icon {
            font-size: 6rem;
            z-index: 2;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1));
            transform: scale(0.9);
            animation: floatIcon 6s infinite ease-in-out;
        }

        .text-frame {
            flex: 1;
            padding: 20px 25px;
            background: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .card-title {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem;
            color: #333;
            margin-bottom: 12px;
            font-weight: 700;
            border-bottom: 1px solid var(--card-border);
            padding-bottom: 8px;
            width: 100%;
        }

        .card-msg {
            font-size: 1rem;
            color: #555;
            line-height: 1.6;
            font-style: italic;
        }
        
        .card-id {
            position: absolute;
            bottom: 5px;
            font-size: 0.7rem;
            color: #ccc;
            letter-spacing: 2px;
        }

        @keyframes pulseLight {
            0%, 100% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.2); opacity: 0.6; }
        }
        
        @keyframes floatIcon {
            0%, 100% { transform: translateY(0) scale(0.9); }
            50% { transform: translateY(-10px) scale(0.95); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Mobile Adapt --- */
        @media (max-width: 600px) {
            .card-spread-container { height: 320px; }
            .card-slot { width: 75px; height: 130px; }
            .result-card-container { width: 260px; height: 440px; }
            .intro-content h1 { font-size: 2.2rem; }
            .instruction { font-size: 1.1rem; top: 18%; }
        }
    </style>
</head>
<body>

    <div class="atmosphere">
        <div class="cloud c1"></div>
        <div class="cloud c2"></div>
        <div class="cloud c3"></div>
        <div class="sparkles"></div>
    </div>

    <div class="app-container">
        
        <div id="intro-screen" class="screen active">
            <div class="intro-content">
                <h1>SOUL ORACLE</h1>
                <p>è¦ªæ„›çš„éˆé­‚ï¼Œå®‡å®™æœ‰è¨Šæ¯è¦å‚³éçµ¦ä½ ã€‚<br>è«‹é–‰ä¸Šé›™çœ¼ï¼Œæ·±å‘¼å¸ä¸‰æ¬¡ï¼Œ<br>åœ¨å¿ƒä¸­é»˜æƒ³ä½ çš„å•é¡Œã€‚</p>
                <button class="btn" onclick="startDivination()">é–‹å§‹é€£çµ</button>
            </div>
        </div>

        <div id="spread-screen" class="screen">
            <div class="instruction">è·Ÿéš¨ç›´è¦ºï¼Œé»æ“Šä¸€å¼µç™¼å…‰çš„ç‰Œ</div>
            <div class="card-spread-container" id="card-spread">
                </div>
        </div>

        <div id="result-screen" class="screen">
            <div class="result-wrapper">
                <div class="result-card-container" id="result-card">
                    <div class="card-face card-face-back"></div>
                    <div class="card-face card-face-front">
                        <div class="art-frame">
                            <div class="art-bg" id="res-bg"></div>
                            <div class="art-icon" id="res-icon">ğŸŒŸ</div>
                        </div>
                        <div class="text-frame">
                            <div class="card-title" id="res-title">Title</div>
                            <div class="card-msg" id="res-text">Text content...</div>
                            <div class="card-id">GUIDANCE</div>
                        </div>
                    </div>
                </div>
                <button class="btn" onclick="resetApp()" style="margin-top: 30px;">æ„Ÿè¬æŒ‡å¼•</button>
            </div>
        </div>

    </div>

    <script>
        // æ“´å……è‡³ 33 å¼µç‰Œå¡ï¼Œå¢åŠ éš¨æ©Ÿæ€§èˆ‡æ·±åº¦
        const oracleDeck = [
            { t: "ç¥è–ç§©åº", c: "#e0c3fc", i: "ğŸ•Šï¸", m: "ä¸€åˆ‡éƒ½åœ¨å®Œç¾çš„å®‰æ’ä¸­ï¼Œå³ä½¿ç¾åœ¨çœ‹ä¼¼æ··äº‚ã€‚è«‹ä¿¡ä»»å®‡å®™çš„æ™‚æ©Ÿï¼Œæ”¾ä¸‹æ§åˆ¶ï¼Œä½ æ­£è¢«æº«æŸ”åœ°å¼•å°è‘—ã€‚" },
            { t: "å…§åœ¨æ™ºæ…§", c: "#a1c4fd", i: "ğŸ‘ï¸", m: "ä½ å°‹æ±‚çš„ç­”æ¡ˆä¸åœ¨å¤–åœ¨ï¼Œè€Œæ˜¯åœ¨ä½ å¿ƒä¸­ã€‚å®‰éœä¸‹ä¾†ï¼Œè†è½é‚£å¾®å°è€Œå …å®šçš„è²éŸ³ã€‚" },
            { t: "ç™‚ç™’ä¹‹å…‰", c: "#d4fc79", i: "âœ¨", m: "å…è¨±è‡ªå·±ä¼‘æ¯ã€‚å¤§å¤©ä½¿æ‹‰æ–çˆ¾çš„ç¶ è‰²å…‰èŠ’æ­£åœ¨åŒ…åœä½ ï¼ŒèˆŠæœ‰çš„å‚·ç—›æ­£åœ¨è½‰åŒ–ç‚ºæ™ºæ…§ã€‚" },
            { t: "å±•ç¿…é«˜é£›", c: "#fbc2eb", i: "ğŸ¦‹", m: "ä½ å·²ç¶“æº–å‚™å¥½äº†ã€‚ä¸è¦å®³æ€•å±•ç¾ä½ çš„çœŸå¯¦è‰²å½©ï¼Œè›»è®Šçš„éç¨‹é›–ç„¶è‰±è¾›ï¼Œä½†çµæœå°‡ç„¡æ¯”ç¾éº—ã€‚" },
            { t: "è±ç››ä¹‹æµ", c: "#ffd1ff", i: "ğŸ’", m: "åŒ±ä¹åªæ˜¯å¹»è±¡ã€‚æ•é–‹å¿ƒèƒ¸æ¥æ”¶ï¼Œå®‡å®™æƒ³è¦çµ¦ä½ çš„é æ¯”ä½ æƒ³åƒçš„æ›´å¤šã€‚" },
            { t: "å®ˆè­·å¤©ä½¿", c: "#c2e9fb", i: "ğŸ‘¼", m: "ä½ ä¸¦ä¸å­¤å–®ã€‚ç•¶ä½ æ„Ÿåˆ°ç„¡åŠ©æ™‚ï¼Œå‘¼å–šæˆ‘å€‘ï¼Œæˆ‘å€‘ä¸€ç›´åœ¨ä½ èº«é‚Šå®ˆè­·è‘—ä½ ã€‚" },
            { t: "å¯¬æ•", c: "#ff9a9e", i: "â¤ï¸", m: "å¯¬æ•ä¸æ˜¯ç‚ºäº†å°æ–¹ï¼Œè€Œæ˜¯ç‚ºäº†é‡‹æ”¾ä½ è‡ªå·±ã€‚å‰ªæ–·æ²ˆé‡çš„é–éˆï¼Œè®“æ„›é‡æ–°æµå‹•ã€‚" },
            { t: "é¡¯åŒ–åŠ›é‡", c: "#84fab0", i: "ğŸŒŸ", m: "ä½ çš„æ€æƒ³èˆ‡èªè¨€å…·æœ‰å‰µé€ åŠ›ã€‚å°ˆæ³¨æ–¼ä½ ã€Œæƒ³è¦ã€çš„ï¼Œè€Œä¸æ˜¯ä½ ææ‡¼çš„ã€‚" },
            { t: "è€å¿ƒç­‰å¾…", c: "#a6c0fe", i: "â³", m: "ç¨®å­åœ¨åœŸè£¡ç™¼èŠ½éœ€è¦æ™‚é–“ã€‚ç¾åœ¨çœ‹ä¼¼åœæ»¯ï¼Œå…¶å¯¦æ˜¯æ ¹åŸºåœ¨æ‰æ·±ã€‚ä¿æŒä¿¡å¿ƒã€‚" },
            { t: "å‹‡æ°£", c: "#f6d365", i: "ğŸ¦", m: "é¢å°ææ‡¼ï¼Œä½ æœƒç™¼ç¾å®ƒåªæ˜¯ä¸€éš»ç´™è€è™ã€‚ä½ æ¯”ä½ æƒ³åƒçš„æ›´å¼·å¤§ã€æ›´å‹‡æ•¢ã€‚" },
            { t: "éˆé­‚ä¼´ä¾¶", c: "#ffdde1", i: "ğŸ¤", m: "ä¸€æ®µé‡è¦çš„é—œä¿‚å³å°‡é€²å…¥æˆ–æ·±åŒ–ã€‚é€™æ˜¯ä¸€é¢é¡å­ï¼Œå¹«åŠ©ä½ çœ‹è¦‹æ›´å®Œæ•´çš„è‡ªå·±ã€‚" },
            { t: "ç´”çœŸ", c: "#e0c3fc", i: "ğŸ¦„", m: "ç”¨å­©å­çš„çœ¼ç›çœ‹ä¸–ç•Œã€‚æ”¾ä¸‹éå¤šçš„åˆ†æèˆ‡è©•åˆ¤ï¼Œç”Ÿæ´»è™•è™•éƒ½æ˜¯å¥‡è¹Ÿã€‚" },
            { t: "ç•Œç·š", c: "#fda085", i: "ğŸ›¡ï¸", m: "æ„›è‡ªå·±åŒ…å«äº†è¨­ç«‹å¥åº·çš„ç•Œç·šã€‚å°ä»–äººèªªã€Œä¸ã€ï¼Œæœ‰æ™‚æ˜¯å°è‡ªå·±èªªã€Œæ˜¯ã€ã€‚" },
            { t: "é †æµè€Œè¡Œ", c: "#89f7fe", i: "ğŸŒŠ", m: "ä¸è¦é€†æµè€Œä¸Šã€‚æ”¾é¬†èº«é«”ï¼Œéš¨æ³¢é€æµï¼Œç”Ÿå‘½ä¹‹æ²³æœƒå°‡ä½ å¸¶å¾€æœ€é©åˆä½ çš„å½¼å²¸ã€‚" },
            { t: "æ„Ÿæ©", c: "#f5efef", i: "ğŸ™", m: "æ„Ÿæ©æ˜¯æœ€é«˜é »ç‡çš„æŒ¯å‹•ã€‚ç´°æ•¸ä½ æ“æœ‰çš„ç¾å¥½ï¼Œæ›´å¤šç¾å¥½å°±æœƒè¢«å¸å¼•è€Œä¾†ã€‚" },
            { t: "å¤©è³¦", c: "#ffecd2", i: "ğŸ", m: "ä½ å¸¶è‘—ç¨ç‰¹çš„ç¦®ç‰©ä¾†åˆ°ä¸–ä¸Šã€‚ä¸è¦éš±è—ä½ çš„å…‰èŠ’ï¼Œä¸–ç•Œéœ€è¦ä½ çš„è²¢ç»ã€‚" },
            { t: "è½‰å½", c: "#cfd9df", i: "â†©ï¸", m: "å¦‚æœå‰æ–¹è·¯ä¸é€šï¼Œé‚£æ˜¯ä¸€å€‹ä¿è­·ã€‚è½‰å€‹å½ï¼Œæ›´å¥½çš„é¢¨æ™¯åœ¨å¦ä¸€æ¢è·¯ä¸Šã€‚" },
            { t: "å–œæ‚…", c: "#fff1eb", i: "ğŸ˜‚", m: "åš´è‚…ä¸ä»£è¡¨éˆæ€§ã€‚å¤§ç¬‘æ˜¯æœ€å¥½çš„è—¥ï¼Œå»åšè®“ä½ æœƒå¿ƒä¸€ç¬‘çš„äº‹æƒ…å§ï¼" },
            { t: "éœå¿ƒ", c: "#dad4ec", i: "ğŸ§˜", m: "å¤–ç•Œçš„è²éŸ³å¤ªåµé›œäº†ã€‚æ¯å¤©èŠ±äº”åˆ†é˜ç¨è™•ï¼Œä½ æœƒåœ¨å¯§éœä¸­æ‰¾å›åŠ›é‡ã€‚" },
            { t: "å¤¢å¢ƒ", c: "#30cfd0", i: "ğŸŒ™", m: "ç•™æ„ä½ çš„å¤¢å¢ƒï¼Œæ½›æ„è­˜æ­£åœ¨å‚³éé‡è¦çš„è¨Šæ¯ã€‚åºŠé‚Šæ”¾ä¸€æ”¯ç­†ï¼Œè¨˜éŒ„ä¸‹ä¾†ã€‚" },
            { t: "è‡ªç„¶", c: "#96e6a1", i: "ğŸŒ¿", m: "å»èµ¤è…³è¸©åœ¨è‰åœ°ä¸Šï¼Œå»æ“æŠ±ä¸€æ£µæ¨¹ã€‚å¤§åœ°çš„èƒ½é‡èƒ½å¹«åŠ©ä½ è½åœ°èˆ‡å……é›»ã€‚" },
            { t: "æ”¾æ‰‹", c: "#fdfbfb", i: "ğŸ‚", m: "åƒç§‹å¤©çš„æ¨¹æœ¨ä¸€æ¨£ï¼Œå„ªé›…åœ°æ”¾æ‰‹ä¸å†æœå‹™æ–¼ä½ çš„äº‹ç‰©ã€‚ç©ºå‡ºçš„ç©ºé–“å°‡è¿ä¾†æ–°ç”Ÿã€‚" },
            { t: "è‡ªæˆ‘åƒ¹å€¼", c: "#fddb92", i: "ğŸ‘‘", m: "ä½ çš„åƒ¹å€¼ä¸å–æ±ºæ–¼ä½ çš„æˆå°±æˆ–ä»–äººçš„è©•åƒ¹ã€‚ä½ æœ¬èº«å°±æ˜¯ç„¡åƒ¹ä¹‹å¯¶ã€‚" },
            { t: "è¡Œå‹•", c: "#ff758c", i: "ğŸš€", m: "ç¥ˆç¦±ä¹‹å¾Œï¼Œéœ€è¦é…åˆè¡Œå‹•ã€‚é‚å‡ºé‚£å°å°çš„ä¸€æ­¥ï¼Œå®‡å®™æœƒçå‹µä½ çš„ä¸»å‹•ã€‚" },
            { t: "å¹³è¡¡", c: "#a8edea", i: "âš–ï¸", m: "æª¢è¦–ä½ çš„ç”Ÿæ´»ï¼šå·¥ä½œèˆ‡ä¼‘æ¯ã€çµ¦äºˆèˆ‡æ¥æ”¶æ˜¯å¦å¤±è¡¡ï¼Ÿå›æ­¸ä¸­å¿ƒã€‚" },
            { t: "æ„›", c: "#ffc3a0", i: "ğŸ’–", m: "é€™ä¸€åˆ‡å•é¡Œçš„ç­”æ¡ˆéƒ½æ˜¯ã€Œæ„›ã€ã€‚ç”¨æ„›å›æ‡‰é€™å€‹ç‹€æ³ï¼Œå¥‡è¹Ÿå°±æœƒç™¼ç”Ÿã€‚" },
            { t: "çœŸç›¸", c: "#a18cd1", i: "ğŸ”¦", m: "æ‘˜ä¸‹é¢å…·ï¼Œèª å¯¦é¢å°è‡ªå·±ã€‚çœŸç›¸é›–ç„¶æœ‰æ™‚åˆºçœ¼ï¼Œä½†å®ƒæ˜¯è‡ªç”±çš„å”¯ä¸€é€”å¾‘ã€‚" },
            { t: "æ…¶ç¥", c: "#ffafbd", i: "ğŸ‰", m: "ä¸è¦ç­‰åˆ°å¤§æˆå°±æ‰æ…¶ç¥ã€‚ç‚ºä½ ä»Šå¤©çš„å°å°é€²æ­¥å–é‡‡ï¼Œå–œæ‚…å¸å¼•å–œæ‚…ã€‚" },
            { t: "ç›´è¦º", c: "#8ec5fc", i: "ğŸ”®", m: "é‚£ä¸€é–ƒè€Œéçš„å¿µé ­ï¼Œæ˜¯å¤©ä½¿çš„ç§èªã€‚ç›¸ä¿¡ä½ çš„ç¬¬ä¸€ç›´è¦ºï¼Œé‚è¼¯å¸¸å¸¸æœƒé¨™äººã€‚" },
            { t: "å®¶åº­", c: "#fbc7d4", i: "ğŸ ", m: "å®¶åº­èª²é¡Œæ­£åœ¨æµ®ç¾ã€‚å¸¶è‘—æ„›èˆ‡ç†è§£å»åŒ–è§£ä¸–ä»£çš„æ¥­åŠ›ï¼Œä½ æ˜¯é‚£å€‹æ”¹è®Šçš„èµ·é»ã€‚" },
            { t: "ç°¡å–®", c: "#e6e9f0", i: "âšª", m: "æŠŠäº‹æƒ…ç°¡å–®åŒ–ã€‚ä½ æŠŠå•é¡Œæƒ³å¾—å¤ªè¤‡é›œäº†ï¼Œå…¶å¯¦è§£æ±ºæ–¹æ¡ˆå–®ç´”è€Œç›´æ¥ã€‚" },
            { t: "é‡ç”Ÿ", c: "#d299c2", i: "ğŸ”¥", m: "åƒé³³å‡°ä¸€æ¨£ï¼Œåœ¨ç°ç‡¼ä¸­é‡ç”Ÿã€‚ä¸è¦å“€æ‚¼éå»ï¼Œæ“æŠ±å…¨æ–°çš„ä½ ã€‚" },
            { t: "ä¿è­·", c: "#4facfe", i: "ğŸ§¿", m: "ä½ è¢«é‡‘è‰²çš„å…‰ç›¾ä¿è­·è‘—ã€‚è² é¢èƒ½é‡ç„¡æ³•ä¾µå…¥ï¼Œè«‹å®‰å¿ƒåœ°ç™¼å…‰ã€‚" }
        ];

        // ç‹€æ…‹
        let isAnimating = false;

        function switchScreen(id) {
            document.querySelectorAll('.screen').forEach(el => {
                el.classList.remove('active');
                el.style.opacity = 0;
            });
            const target = document.getElementById(id);
            target.classList.add('active');
            setTimeout(() => target.style.opacity = 1, 50);
        }

        function startDivination() {
            renderSpread();
            switchScreen('spread-screen');
        }

        // æ ¸å¿ƒé‚è¼¯ï¼šç”Ÿæˆæ›´æœ‰æ©Ÿã€éš¨æ©Ÿçš„ç‰Œé™£
        function renderSpread() {
            const container = document.getElementById('card-spread');
            container.innerHTML = '';
            
            // æ±ºå®šé¡¯ç¤ºå¤šå°‘å¼µç‰Œ (è¦–è¦ºä¸Š)
            const isMobile = window.innerWidth < 600;
            const displayCount = isMobile ? 18 : 28; // é›»è…¦é¡¯ç¤ºæ›´å¤šï¼Œæ›´æœ‰æ°£å‹¢
            
            const totalArc = isMobile ? 80 : 100; // æ‰‡å½¢ç¸½è§’åº¦
            const startAngle = -totalArc / 2;
            const step = totalArc / (displayCount - 1);

            for (let i = 0; i < displayCount; i++) {
                const card = document.createElement('div');
                card.className = 'card-slot';
                
                // åŸºç¤æ•¸å­¸è¨ˆç®—
                let angle = startAngle + (step * i);
                
                // --- å¢åŠ éš¨æ©Ÿæ€§ (Human Touch) ---
                // 1. è§’åº¦å¾®èª¿ (jitter)
                const randomAngleJitter = (Math.random() * 4) - 2; // -2 deg to +2 deg
                const finalAngle = angle + randomAngleJitter;
                
                // 2. é«˜åº¦å¾®èª¿
                // åŸºç¤å¼§ç·šå…¬å¼ (y = x^2 è¿‘ä¼¼)
                let baseTranslateY = Math.abs(finalAngle) * (isMobile ? 1.2 : 1.5);
                const randomYJitter = (Math.random() * 10) - 5; 
                let finalTranslateY = baseTranslateY + randomYJitter;

                // 3. Z-index ç¢ºä¿å †ç–Šé †åºæ­£ç¢º
                card.style.zIndex = i;

                // æ‡‰ç”¨æ¨£å¼
                card.style.transform = `rotate(${finalAngle}deg) translateY(${finalTranslateY}px)`;
                
                // ç‚ºæ¯ä¸€å¼µç‰ŒåŠ ä¸Šå¾®å°çš„å‹•ç•«å»¶é²ï¼Œç”¢ç”Ÿå‘¼å¸æ„Ÿ
                card.style.animation = `floatCard ${3 + Math.random()}s infinite alternate ease-in-out`;
                card.style.animationDelay = `${Math.random() * 2}s`;

                const cardBack = document.createElement('div');
                cardBack.className = 'card-back';
                card.appendChild(cardBack);

                // é»æ“Šäº‹ä»¶ï¼šå¾å®Œæ•´çš„ 33 å¼µç‰Œåº«ä¸­éš¨æ©ŸæŠ½ä¸€å¼µ
                card.onclick = function() {
                    if(isAnimating) return;
                    // è¦–è¦ºï¼šè¢«é»æ“Šçš„ç‰Œå¾€ä¸Šé£› (ç°¡å–®æ•ˆæœ)
                    this.style.transform = `translateY(-100px) scale(1.2)`;
                    this.style.opacity = '0';
                    pickCard();
                };

                container.appendChild(card);
            }
        }

        // éš¨æ©ŸæŠ½é¸çµæœ
        function pickCard() {
            isAnimating = true;
            // çœŸéš¨æ©Ÿï¼šå¾ oracleDeck é™£åˆ—ä¸­éš¨æ©Ÿå–ä¸€
            const randomIndex = Math.floor(Math.random() * oracleDeck.length);
            const data = oracleDeck[randomIndex];

            // å¡«å……è³‡æ–™
            document.getElementById('res-title').innerText = data.t;
            document.getElementById('res-text').innerText = data.m;
            document.getElementById('res-icon').innerText = data.i;
            document.getElementById('res-bg').style.setProperty('--glow-color', data.c);

            // åˆ‡æ›ç•«é¢
            setTimeout(() => {
                switchScreen('result-screen');
                // ç¿»ç‰Œå‹•ç•«
                setTimeout(() => {
                    document.getElementById('result-card').classList.add('flipped');
                    isAnimating = false;
                }, 300);
            }, 600); // ç­‰å¾…æ·¡å‡º
        }

        function resetApp() {
            // ç¿»å›å»
            document.getElementById('result-card').classList.remove('flipped');
            setTimeout(() => {
                switchScreen('intro-screen');
            }, 600);
        }

        // å®šç¾© keyframes çµ¦å‹•æ…‹ç”Ÿæˆçš„ style ä½¿ç”¨
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes floatCard {
                0% { margin-top: 0px; }
                100% { margin-top: -10px; }
            }
        `;
        document.head.appendChild(styleSheet);

    </script>
</body>
</html>
