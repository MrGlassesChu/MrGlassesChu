<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜¥ç¯€å¿ƒæƒ…å°é…’é¤¨ ğŸ·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-30px) translateX(20px); }
        }
        @keyframes shimmer {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            50% { text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6); }
        }
        @keyframes drinkFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .float-anim { animation: float 15s ease-in-out infinite; }
        .shimmer-anim { animation: shimmer 2s ease-in-out infinite; }
        .glow-anim { animation: glow 3s ease-in-out infinite; }
        .drink-float { animation: drinkFloat 3s ease-in-out infinite; }
    </style>
</head>
<body class="bg-gradient-to-br from-red-900 via-red-800 to-rose-900 text-white min-h-screen overflow-x-hidden">
    <!-- èƒŒæ™¯è£é£¾ -->
    <div id="bgDecor" class="fixed inset-0 opacity-10 pointer-events-none"></div>

    <div class="max-w-2xl mx-auto p-4 relative z-10">
        <!-- æ¨™é¡Œ -->
        <div class="text-center mb-8 mt-6">
            <div class="flex items-center justify-center gap-3 mb-2">
                <svg class="w-8 h-8 text-yellow-400 shimmer-anim" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                </svg>
                <h1 class="text-4xl font-bold glow-anim">æ˜¥ç¯€å¿ƒæƒ…å°é…’é¤¨</h1>
                <svg class="w-8 h-8 text-yellow-400 shimmer-anim" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                </svg>
            </div>
            <p class="text-yellow-200 text-sm">æŠŠå¿ƒæƒ…èªªçµ¦æˆ‘è½,è®“é…’ä¿ç‚ºä½ èª¿è£½å°ˆå±¬é£²å“</p>
        </div>

        <!-- éŸ³æ¨‚æ§åˆ¶ -->
        <div class="absolute top-4 right-4">
            <button id="musicBtn" class="bg-red-700/50 hover:bg-red-600/50 p-3 rounded-full transition-all backdrop-blur-sm">
                <svg id="musicIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>
                </svg>
            </button>
        </div>

        <!-- è¼¸å…¥å€åŸŸ -->
        <div class="bg-red-800/40 backdrop-blur-md rounded-2xl p-6 mb-6 shadow-2xl border border-red-600/30">
            <label class="block text-yellow-200 mb-3 text-sm font-semibold flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                </svg>
                ä»Šå¤©çš„å¿ƒæƒ…æ˜¯...
            </label>
            <textarea id="moodInput" placeholder="èªªèªªä½ çš„å¿ƒæƒ…å§...&#10;é–‹å¿ƒã€é›£éã€ç´¯ã€ç„¦æ…®...ä»€éº¼éƒ½å¯ä»¥" class="w-full bg-red-900/50 border border-red-600/50 rounded-xl p-4 text-white placeholder-red-300/50 focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/50 transition-all min-h-32 resize-none"></textarea>
            <button id="submitBtn" class="w-full mt-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-red-900 font-bold py-3 px-6 rounded-xl transition-all transform hover:scale-105 active:scale-95 shadow-lg">
                è«‹é…’ä¿èª¿é…’ ğŸ¹
            </button>
        </div>

        <!-- é£²å“å±•ç¤º -->
        <div id="drinkDisplay" class="hidden"></div>

        <!-- ä¸‹è¼‰æŒ‰éˆ• -->
        <div id="downloadSection" class="hidden text-center mb-6">
            <button id="downloadBtn" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-xl transition-all transform hover:scale-105 active:scale-95 shadow-lg inline-flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                </svg>
                ä¸‹è¼‰å¿ƒæƒ…ç´€éŒ„ (<span id="recordCount">0</span>)
            </button>
        </div>

        <!-- åº•éƒ¨è£é£¾ -->
        <div class="text-center text-yellow-200/60 text-xs mt-8 pb-4">
            <p>ğŸ® é¡˜æ–°çš„ä¸€å¹´,æ‰€æœ‰å¿ƒæƒ…éƒ½èƒ½è¢«æº«æŸ”å°å¾… ğŸ®</p>
        </div>
    </div>

    <script>
        // é£²å“é…æ–¹
        const drinkRecipes = {
            happy: {
                name: 'é‡‘æ©˜æ°£æ³¡',
                color: 'from-amber-400 to-yellow-500',
                ingredients: ['é‡‘æ¡”', 'æ°£æ³¡æ°´', 'èœ‚èœœ', 'è–„è·'],
                message: 'é¡˜ä½ çš„ç¬‘å®¹åƒé€™æ¯é£²å“ä¸€æ¨£é–ƒè€€,æ–°å¹´å¿«æ¨‚,ç¹¼çºŒç™¼å…‰!'
            },
            excited: {
                name: 'ç«é¾æœç‹‚æƒ³',
                color: 'from-pink-500 to-rose-600',
                ingredients: ['ç«é¾æœ', 'ç™¾é¦™æœ', 'æ°£æ³¡æ°´', 'è–„è·'],
                message: 'ä½ çš„ç†±æƒ…é»ç‡ƒäº†æ•´å€‹é…’é¤¨!æ–°çš„ä¸€å¹´,ç¹¼çºŒä¿æŒé€™ä»½æ´»åŠ›!'
            },
            grateful: {
                name: 'èœœæ¡ƒæ„Ÿæ©',
                color: 'from-orange-300 to-pink-400',
                ingredients: ['æ°´èœœæ¡ƒ', 'ç«ç‘°', 'èœ‚èœœ', 'æ°£æ³¡æ°´'],
                message: 'æ„Ÿæ©çš„å¿ƒæœ€ç¾éº—ã€‚é€™æ¯ç”œç¾,ç»çµ¦æ‡‚å¾—çæƒœçš„ä½ ã€‚'
            },
            proud: {
                name: 'é¦™æª³é‡‘è¼',
                color: 'from-yellow-300 to-amber-400',
                ingredients: ['é‡‘ç®”', 'ç™½è‘¡è„', 'é¦™æª³', 'è¿·è¿­é¦™'],
                message: 'ä½ å€¼å¾—ç‚ºè‡ªå·±é©•å‚²!é€™ä¸€åˆ»çš„æˆå°±,æ˜¯ä½ åŠªåŠ›çš„è­‰æ˜ã€‚'
            },
            sad: {
                name: 'æ·±å¤œè—èª¿',
                color: 'from-blue-500 to-indigo-600',
                ingredients: ['è—æŸ‘æ©˜', 'æª¸æª¬', 'è˜‡æ‰“æ°´', 'è–°è¡£è‰'],
                message: 'æ¯å€‹æ·±å¤œéƒ½æœƒéå»,é»æ˜ç¸½æœƒåˆ°ä¾†ã€‚é€™æ¯ç¨ç‰¹çš„è—,é™ªä½ åº¦éé€™ä¸€åˆ»ã€‚'
            },
            heartbroken: {
                name: 'ç«ç‘°æ·šæ»´',
                color: 'from-rose-400 to-red-500',
                ingredients: ['ç«ç‘°èŠ±ç“£', 'è”“è¶Šè“', 'æª¸æª¬', 'å†°å¡Š'],
                message: 'å¿ƒç¢æ˜¯æˆé•·çš„å°è¨˜ã€‚é€™æ¯é…¸ç”œ,ç†è§£ä½ æ­¤åˆ»çš„ç—›ã€‚æ™‚é–“æœƒè®“ä¸€åˆ‡å¥½è½‰ã€‚'
            },
            disappointed: {
                name: 'ç°éœ§æ²‰æ€',
                color: 'from-gray-500 to-slate-600',
                ingredients: ['ä¼¯çˆµèŒ¶', 'ç‰›å¥¶', 'é¦™è‰', 'è‚‰æ¡‚'],
                message: 'å¤±æœ›æ˜¯æœŸå¾…çš„å¦ä¸€é¢ã€‚é€™æ¬¡ä¸å¦‚é æœŸ,ä½†ä½ ä¾ç„¶å‹‡æ•¢å˜—è©¦äº†ã€‚'
            },
            nostalgic: {
                name: 'æ™‚å…‰ç¥ç€',
                color: 'from-amber-500 to-orange-600',
                ingredients: ['æ¡‚èŠ±', 'çƒé¾èŒ¶', 'èœ‚èœœ', 'å†°ç³–'],
                message: 'å›æ†¶æ˜¯å¿ƒéˆçš„çå¯¶ã€‚é‚£äº›ç¾å¥½æ™‚å…‰,æ°¸é æ´»åœ¨ä½ å¿ƒä¸­ã€‚'
            },
            tired: {
                name: 'æ™¨éœ²ç”¦é†’',
                color: 'from-green-400 to-teal-500',
                ingredients: ['è–„è·', 'é’æª¸', 'ç¶ èŒ¶', 'èœ‚èœœ'],
                message: 'ç´¯äº†å°±ä¼‘æ¯,æ²’é—œä¿‚çš„ã€‚é€™æ¯æ¸…æ–°,ç‚ºä½ æ³¨å…¥ä¸€é»èƒ½é‡ã€‚'
            },
            exhausted: {
                name: 'æ·±çœ é¦™è‰',
                color: 'from-indigo-400 to-purple-500',
                ingredients: ['è–°è¡£è‰', 'æ´‹ç”˜èŠ', 'ç‰›å¥¶', 'èœ‚èœœ'],
                message: 'ä½ å·²ç¶“å¾ˆåŠªåŠ›äº†ã€‚æ”¾ä¸‹ä¸€åˆ‡,è®“é€™æ¯æº«æš–å¸¶ä½ é€²å…¥å¤¢é„‰ã€‚'
            },
            burnout: {
                name: 'å†°å·éœå¿ƒ',
                color: 'from-cyan-300 to-blue-400',
                ingredients: ['è–„è·', 'å†°å¡Š', 'æª¸æª¬æ°´', 'æµ·é¹½'],
                message: 'ç‡ƒç‡’æ®†ç›¡ä¸æ˜¯çµ‚é»ã€‚åœä¸‹ä¾†,é‡æ–°ç‚ºè‡ªå·±å……é›»,ä½ å€¼å¾—å¥½å¥½ä¼‘æ¯ã€‚'
            },
            anxious: {
                name: 'è–°è¡£è‰å¯§éœ',
                color: 'from-purple-400 to-pink-400',
                ingredients: ['è–°è¡£è‰', 'æ´‹ç”˜èŠ', 'èœ‚èœœ', 'æª¸æª¬'],
                message: 'æ·±å‘¼å¸,ä¸€åˆ‡éƒ½æœƒå¥½çš„ã€‚è®“é€™æ¯æº«æŸ”é™ªä½ æ‰¾å›å¹³éœã€‚'
            },
            stressed: {
                name: 'æ©™èŠ±èˆ’å£“',
                color: 'from-orange-400 to-yellow-400',
                ingredients: ['æ©™èŠ±', 'æª¸æª¬', 'èœ‚èœœ', 'è˜‡æ‰“æ°´'],
                message: 'å£“åŠ›å±±å¤§æ™‚,è¨˜å¾—å°è‡ªå·±æº«æŸ”ä¸€é»ã€‚ä½ å·²ç¶“åšå¾—å¤ å¥½äº†ã€‚'
            },
            overwhelmed: {
                name: 'æ£®æ—å‘¼å¸',
                color: 'from-green-500 to-emerald-600',
                ingredients: ['å°¤åŠ åˆ©', 'è–„è·', 'é’æª¸', 'å†°å¡Š'],
                message: 'äº‹æƒ…å¤ªå¤šæ™‚,ä¸€æ¬¡è™•ç†ä¸€ä»¶å°±å¥½ã€‚æ·±å‘¼å¸,ä½ å¯ä»¥çš„ã€‚'
            },
            nervous: {
                name: 'èŒ‰è‰å®‰æ’«',
                color: 'from-lime-300 to-green-400',
                ingredients: ['èŒ‰è‰èŠ±', 'ç¶ èŒ¶', 'èœ‚èœœ', 'æª¸æª¬'],
                message: 'ç·Šå¼µæ˜¯åœ¨ä¹çš„è­‰æ˜ã€‚ç›¸ä¿¡è‡ªå·±,ä½ æ¯”æƒ³åƒä¸­æ›´å¼·å¤§ã€‚'
            },
            lonely: {
                name: 'æœˆå…‰ç§èª',
                color: 'from-slate-400 to-purple-500',
                ingredients: ['è‘¡è„', 'ç«ç‘°', 'è˜‡æ‰“æ°´', 'éŠ€ç®”'],
                message: 'å­¤ç¨ä¹Ÿæ˜¯ä¸€ç¨®é™ªä¼´ã€‚åœ¨é€™å€‹å¤œæ™š,é…’é¤¨èˆ‡ä½ åŒåœ¨ã€‚'
            },
            empty: {
                name: 'æ˜Ÿç©ºæ¼«éŠ',
                color: 'from-indigo-600 to-purple-700',
                ingredients: ['è—è“', 'é»‘è“', 'è˜‡æ‰“æ°´', 'éŠ€ç®”'],
                message: 'ç©ºè™›æ™‚,è®“å¿ƒéˆå»æ—…è¡Œã€‚é€™æ¯æ·±é‚ƒ,é™ªä½ æ¢ç´¢å…§å¿ƒå®‡å®™ã€‚'
            },
            abandoned: {
                name: 'å®ˆè­·å¤©ä½¿',
                color: 'from-pink-300 to-rose-400',
                ingredients: ['è‰è“', 'ç«ç‘°', 'å¥¶éœœ', 'æ£‰èŠ±ç³–'],
                message: 'å³ä½¿å…¨ä¸–ç•Œé›¢é–‹,ä½ ä¾ç„¶å€¼å¾—è¢«æ„›ã€‚é…’é¤¨æ°¸é ç‚ºä½ ç•™ä¸€ç›ç‡ˆã€‚'
            },
            hopeful: {
                name: 'æ™¨æ›¦è¨±é¡˜',
                color: 'from-orange-400 to-red-400',
                ingredients: ['æŸ³æ©™', 'ç´…çŸ³æ¦´', 'æ°£æ³¡æ°´', 'è‚‰æ¡‚'],
                message: 'æ–°å¹´æ–°å¸Œæœ›,ä½ çš„é¡˜æœ›å·²è¢«è½è¦‹ã€‚æœªä¾†å¯æœŸ,ä¸€åˆ‡éƒ½æœƒå¯¦ç¾!'
            },
            determined: {
                name: 'çƒˆç„°æ„å¿—',
                color: 'from-red-500 to-orange-600',
                ingredients: ['è¾£æ¤’', 'è–‘', 'æª¸æª¬', 'èœ‚èœœ'],
                message: 'æ±ºå¿ƒå¦‚ç«,ç…§äº®å‰è·¯ã€‚å¸¶è‘—é€™ä»½ç†±æƒ…,æ²’æœ‰ä»€éº¼èƒ½é˜»æ“‹ä½ !'
            },
            inspired: {
                name: 'éˆæ„Ÿç¹†æ€',
                color: 'from-cyan-400 to-blue-500',
                ingredients: ['è—æŸ‘æ©˜', 'è–„è·', 'æ°£æ³¡æ°´', 'ç³–æ¼¿'],
                message: 'éˆæ„Ÿå¦‚æ³‰æ¹§,å‰µæ„ç„¡é™ã€‚é€™æ¯æ¸…çˆ½,ç‚ºä½ çš„æƒ³æ³•æ³¨å…¥æ´»åŠ›!'
            },
            confused: {
                name: 'è¿·éœ§æ¢ç´¢',
                color: 'from-gray-400 to-blue-400',
                ingredients: ['èŒ‰è‰', 'æª¸æª¬è‰', 'è˜‡æ‰“æ°´', 'å†°å¡Š'],
                message: 'è¿·èŒ«æ˜¯æ¢ç´¢çš„é–‹å§‹ã€‚æ…¢æ…¢ä¾†,ç­”æ¡ˆæœƒåœ¨è·¯ä¸Šç­‰ä½ ã€‚'
            },
            lost: {
                name: 'ç¾…ç›¤æŒ‡å¼•',
                color: 'from-teal-400 to-cyan-500',
                ingredients: ['è–„è·', 'ç¾…å‹’', 'æª¸æª¬', 'æµ·é¹½'],
                message: 'è¿·è·¯ä¸å¯æ€•,é‚£æ˜¯æ‰¾åˆ°æ–°æ–¹å‘çš„æ©Ÿæœƒã€‚ç›¸ä¿¡ç›´è¦º,å®ƒæœƒå¸¶ä½ å›å®¶ã€‚'
            },
            uncertain: {
                name: 'è–„éœ§æ¼«æ­¥',
                color: 'from-gray-300 to-blue-300',
                ingredients: ['ç™½èŒ¶', 'èŒ‰è‰', 'èœ‚èœœ', 'å†°å¡Š'],
                message: 'ä¸ç¢ºå®šä¹Ÿæ˜¯ä¸€ç¨®ç­”æ¡ˆã€‚åœ¨æ¨¡ç³Šä¸­å‰è¡Œ,æœ‰æ™‚åè€Œçœ‹å¾—æ›´æ¸…æ¥šã€‚'
            },
            angry: {
                name: 'ç«å±±çˆ†ç™¼',
                color: 'from-red-600 to-orange-700',
                ingredients: ['è¾£æ¤’', 'ç•ªèŒ„', 'æª¸æª¬', 'å†°å¡Š'],
                message: 'æ†¤æ€’æ˜¯åŠ›é‡çš„å±•ç¾ã€‚æ„Ÿå—å®ƒ,é‡‹æ”¾å®ƒ,ç„¶å¾Œè®“å®ƒéå»ã€‚ä½ å€¼å¾—å¹³éœã€‚'
            },
            frustrated: {
                name: 'é¢±é¢¨çœ¼',
                color: 'from-slate-500 to-gray-600',
                ingredients: ['é»‘èŠéº»', 'ç‰›å¥¶', 'èœ‚èœœ', 'å†°å¡Š'],
                message: 'æŒ«æŠ˜æ˜¯æˆåŠŸçš„å‰å¥ã€‚æš´é¢¨é›¨çš„ä¸­å¿ƒæœ€å¹³éœ,ç©¿éå»å°±æ˜¯æ™´å¤©ã€‚'
            },
            jealous: {
                name: 'ç¿¡ç¿ å¿ƒäº‹',
                color: 'from-emerald-500 to-green-600',
                ingredients: ['å¥‡ç•°æœ', 'è–„è·', 'æª¸æª¬', 'è˜‡æ‰“æ°´'],
                message: 'å«‰å¦’åæ˜ äº†ä½ çš„æ¸´æœ›ã€‚èªè­˜å®ƒ,ç„¶å¾Œå°ˆæ³¨æ–¼è‡ªå·±çš„ç²¾å½©äººç”Ÿã€‚'
            },
            peaceful: {
                name: 'ç¦ªæ„ç«¹æ—',
                color: 'from-green-300 to-teal-400',
                ingredients: ['æŠ¹èŒ¶', 'ç«¹è‘‰', 'èœ‚èœœ', 'å†°å¡Š'],
                message: 'å…§å¿ƒå¹³éœæ˜¯æœ€å¤§çš„å¯Œè¶³ã€‚é€™ä»½å¯§éœ,æ˜¯ä½ çµ¦è‡ªå·±æœ€å¥½çš„ç¦®ç‰©ã€‚'
            },
            content: {
                name: 'åœ“æ»¿æ™‚åˆ»',
                color: 'from-amber-300 to-yellow-400',
                ingredients: ['æŸ³æ©™', 'èœ‚èœœ', 'è‚‰æ¡‚', 'æº«æ°´'],
                message: 'çŸ¥è¶³å¸¸æ¨‚,é€™ä¸€åˆ»å‰›å‰›å¥½ã€‚ç°¡å–®çš„å¹¸ç¦,å°±æ˜¯æœ€çœŸå¯¦çš„ç¾å¥½ã€‚'
            },
            loved: {
                name: 'ç«ç‘°æ“æŠ±',
                color: 'from-pink-400 to-rose-500',
                ingredients: ['ç«ç‘°', 'è‰è“', 'å¥¶éœœ', 'ç³–æ¼¿'],
                message: 'è¢«æ„›çš„æ„Ÿè¦ºçœŸå¥½ã€‚é€™ä»½æº«æš–,å€¼å¾—ä½ å¥½å¥½çè—åœ¨å¿ƒåº•ã€‚'
            },
            motivated: {
                name: 'é›·éœ†å‡ºæ“Š',
                color: 'from-yellow-400 to-orange-500',
                ingredients: ['èŠ’æœ', 'ç™¾é¦™æœ', 'è–‘', 'æ°£æ³¡æ°´'],
                message: 'å‹•åŠ›æ»¿æ»¿!é€™è‚¡è¡å‹æœƒå¸¶ä½ åˆ°æƒ³å»çš„åœ°æ–¹,å…¨åŠ›ä»¥èµ´å§!'
            },
            melancholic: {
                name: 'ç§‹æ—¥ç§èª',
                color: 'from-orange-300 to-brown-400',
                ingredients: ['æ¡‚èŠ±', 'çƒé¾èŒ¶', 'èœ‚èœœ', 'è‚‰æ¡‚'],
                message: 'æ·¡æ·¡çš„æ†‚å‚·ä¹Ÿæ˜¯ä¸€ç¨®ç¾ã€‚è®“è‡ªå·±æ²‰æµ¸å…¶ä¸­,ç„¶å¾Œæ…¢æ…¢èµ°å‡ºä¾†ã€‚'
            },
            hopeless: {
                name: 'é»æ˜å‰å¤œ',
                color: 'from-indigo-700 to-purple-800',
                ingredients: ['é»‘è“', 'è—è“', 'æª¸æª¬', 'å†°å¡Š'],
                message: 'æœ€é»‘æš—çš„æ™‚åˆ»,é»æ˜å°±åœ¨ä¸é è™•ã€‚æ’ä½,å…‰æ˜å¾ˆå¿«å°±æœƒåˆ°ä¾†ã€‚'
            },
            relieved: {
                name: 'é‡‹æ”¾ä¹‹æ¯',
                color: 'from-sky-300 to-blue-400',
                ingredients: ['è–„è·', 'æª¸æª¬', 'è˜‡æ‰“æ°´', 'å†°å¡Š'],
                message: 'çµ‚æ–¼å¯ä»¥é¬†ä¸€å£æ°£äº†ã€‚æ”¾ä¸‹é‡æ“”çš„æ„Ÿè¦ºçœŸå¥½,å¥½å¥½äº«å—é€™ä»½è¼•ç›ˆã€‚'
            }
        };

        let records = [];
        let isPlaying = false;
        let audioContext = null;
        let musicInterval = null;

        // åˆå§‹åŒ–èƒŒæ™¯è£é£¾
        function initBackground() {
            const decor = document.getElementById('bgDecor');
            for (let i = 0; i < 20; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'absolute rounded-full bg-yellow-400 float-anim';
                bubble.style.width = Math.random() * 100 + 20 + 'px';
                bubble.style.height = Math.random() * 100 + 20 + 'px';
                bubble.style.left = Math.random() * 100 + '%';
                bubble.style.top = Math.random() * 100 + '%';
                bubble.style.animationDelay = Math.random() * 5 + 's';
                decor.appendChild(bubble);
            }
        }

        // åˆ†æå¿ƒæƒ…
        function analyzeMood(text) {
            const lower = text.toLowerCase();
            
            // æ­£é¢æƒ…ç·’ - é«˜èƒ½é‡
            if (lower.match(/é–‹å¿ƒ|å¿«æ¨‚|é«˜èˆˆ|å—¨|æ£’|è®š|å“ˆå“ˆ|çˆ½|å¤ªå¥½äº†/)) return 'happy';
            if (lower.match(/èˆˆå¥®|æ¿€å‹•|æœŸå¾…|é›€èº|è¡å‹|ç†±è¡€|å……æ»¿æ´»åŠ›/)) return 'excited';
            if (lower.match(/æ„Ÿæ©|æ„Ÿè¬|è¬è¬|å¹¸é‹|çæƒœ|çŸ¥è¶³/)) return 'grateful';
            if (lower.match(/é©•å‚²|è‡ªè±ª|æˆå°±|é”æˆ|å®Œæˆäº†|åšåˆ°äº†/)) return 'proud';
            if (lower.match(/å‹•åŠ›|å¹¹å‹|æœ‰å‹|æƒ³åš|è¡äº†|æ‹¼äº†/)) return 'motivated';
            
            // æ­£é¢æƒ…ç·’ - ä½èƒ½é‡
            if (lower.match(/å¹³éœ|å¹³å’Œ|å®‰è©³|å¯§éœ|æ”¾é¬†|èˆ’æœ/)) return 'peaceful';
            if (lower.match(/æ»¿è¶³|çŸ¥è¶³|å‰›å¥½|å¤ äº†|å¯ä»¥äº†/)) return 'content';
            if (lower.match(/è¢«æ„›|æœ‰æ„›|æº«æš–|å¹¸ç¦|ç”œèœœ/)) return 'loved';
            if (lower.match(/é¬†äº†å£æ°£|çµ‚æ–¼|è§£è„±|æ”¾ä¸‹äº†|å¥½å¤šäº†/)) return 'relieved';
            if (lower.match(/éˆæ„Ÿ|å‰µæ„|æƒ³æ³•|é»å­|å•Ÿç™¼/)) return 'inspired';
            
            // è² é¢æƒ…ç·’ - æ‚²å‚·ç³»
            if (lower.match(/é›£é|å‚·å¿ƒ|å“­|ç—›|å¤±è½|æ†‚é¬±|ä¸é–‹å¿ƒ/)) return 'sad';
            if (lower.match(/å¿ƒç¢|åˆ†æ‰‹|å¤±æˆ€|èƒŒå›|è¢«å‚·å®³/)) return 'heartbroken';
            if (lower.match(/å¤±æœ›|ä¸å¦‚é æœŸ|æœŸå¾…è½ç©º|ç®—äº†/)) return 'disappointed';
            if (lower.match(/æ‡·å¿µ|æƒ³å¿µ|å›æ†¶|ä»¥å‰|é‚£æ™‚å€™|éå»/)) return 'nostalgic';
            if (lower.match(/æ†‚é¬±|æ·¡æ·¡çš„|æƒ†æ‚µ|æ„Ÿå‚·/)) return 'melancholic';
            if (lower.match(/çµ•æœ›|æ²’å¸Œæœ›|æ”¾æ£„|ä¸æƒ³æ´»|èµ°ä¸ä¸‹å»/)) return 'hopeless';
            
            // è² é¢æƒ…ç·’ - ç–²æ†Šç³»
            if (lower.match(/ç´¯|ç–²æ†Š|ç|æƒ³ç¡|ç„¡åŠ›|å€¦/)) return 'tired';
            if (lower.match(/ç²¾ç–²åŠ›ç›¡|æ’ä¸ä½|å¥½ç´¯|å´©æ½°|å—å¤ äº†/)) return 'exhausted';
            if (lower.match(/ç‡ƒç‡’æ®†ç›¡|éå‹|å£“æ¦¨|è€—ç›¡|ä¸æƒ³å‹•/)) return 'burnout';
            
            // è² é¢æƒ…ç·’ - ç„¦æ…®ç³»
            if (lower.match(/ç„¦æ…®|ç·Šå¼µ|æ“”å¿ƒ|ä¸å®‰|ç…©|å£“åŠ›/)) return 'anxious';
            if (lower.match(/å£“åŠ›å¤§|å–˜ä¸éæ°£|è² è·|å¥½å¤šäº‹|å¿™ä¸éä¾†/)) return 'stressed';
            if (lower.match(/overwhelm|æ‡‰ä»˜ä¸ä¾†|å¤ªå¤šäº†|æ‰¿å—ä¸ä½/)) return 'overwhelmed';
            if (lower.match(/ç·Šå¼µ|æ€•|å®³æ€•|ææ‡¼|ä¸æ•¢/)) return 'nervous';
            
            // è² é¢æƒ…ç·’ - å­¤ç¨ç³»
            if (lower.match(/å­¤å–®|å¯‚å¯|ç¨è‡ª|alone|ä¸€å€‹äºº|æ²’äºº/)) return 'lonely';
            if (lower.match(/ç©ºè™›|ç©ºæ´|æ²’æ„Ÿè¦º|éº»æœ¨|ç„¡æ„Ÿ/)) return 'empty';
            if (lower.match(/è¢«æ‹‹æ£„|è¢«å¿½ç•¥|æ²’äººåœ¨ä¹|ä¸é‡è¦/)) return 'abandoned';
            
            // è² é¢æƒ…ç·’ - æ†¤æ€’ç³»
            if (lower.match(/ç”Ÿæ°£|æ†¤æ€’|ç«å¤§|æ°£æ­»|ä¸çˆ½|å¹¹/)) return 'angry';
            if (lower.match(/æŒ«æŠ˜|å¡ä½|ä¸é †|ç‚ºä»€éº¼|å—é˜»/)) return 'frustrated';
            if (lower.match(/å«‰å¦’|ç¾¨æ…•|çœ¼ç´…|ä¸å…¬å¹³|æ†‘ä»€éº¼/)) return 'jealous';
            
            // ä¸­æ€§æƒ…ç·’ - å¸Œæœ›ç³»
            if (lower.match(/å¸Œæœ›|æœŸç›¼|é¡˜æœ›|å¤¢æƒ³|ç›¸ä¿¡|æœƒå¥½çš„/)) return 'hopeful';
            if (lower.match(/æ±ºå¿ƒ|ä¸‹å®šæ±ºå¿ƒ|ä¸€å®šè¦|æˆ‘è¦|ç›®æ¨™/)) return 'determined';
            
            // ä¸­æ€§æƒ…ç·’ - è¿·èŒ«ç³»
            if (lower.match(/å›°æƒ‘|è¿·èŒ«|ä¸çŸ¥é“|ç–‘æƒ‘|æ··äº‚/)) return 'confused';
            if (lower.match(/è¿·è·¯|æ‰¾ä¸åˆ°|ä¸çŸ¥é“æ–¹å‘|è©²æ€éº¼è¾¦/)) return 'lost';
            if (lower.match(/ä¸ç¢ºå®š|å¯èƒ½|ä¹Ÿè¨±|çŒ¶è±«|æ–æ“º/)) return 'uncertain';
            
            // å¦‚æœéƒ½ä¸åŒ¹é…,éš¨æ©Ÿè¿”å›ä¸€å€‹
            const keys = Object.keys(drinkRecipes);
            return keys[Math.floor(Math.random() * keys.length)];
        }

        // æ’­æ”¾ç’°å¢ƒéŸ³æ¨‚
        function playAmbience() {
            if (!isPlaying || !audioContext) return;
            
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            const filter = audioContext.createBiquadFilter();
            
            oscillator.connect(filter);
            filter.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            const baseFreq = 200 + Math.random() * 200;
            oscillator.frequency.value = baseFreq;
            oscillator.type = 'sine';
            
            filter.type = 'lowpass';
            filter.frequency.value = 800;
            
            gainNode.gain.value = 0;
            gainNode.gain.linearRampToValueAtTime(0.08, audioContext.currentTime + 0.5);
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 4);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 4);
        }

        // åˆ‡æ›éŸ³æ¨‚
        function toggleMusic() {
            isPlaying = !isPlaying;
            
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            
            const icon = document.getElementById('musicIcon');
            if (isPlaying) {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>';
                playAmbience();
                musicInterval = setInterval(playAmbience, 5000);
            } else {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>';
                if (musicInterval) {
                    clearInterval(musicInterval);
                    musicInterval = null;
                }
            }
        }

        // é¡¯ç¤ºé£²å“
        function showDrink(drink, mood) {
            const display = document.getElementById('drinkDisplay');
            
            const bubblesHTML = Array.from({length: 5}, (_, i) => `
                <div class="absolute bg-white/60 rounded-full" style="
                    width: ${Math.random() * 8 + 4}px;
                    height: ${Math.random() * 8 + 4}px;
                    left: ${20 + Math.random() * 60}%;
                    bottom: ${Math.random() * 80}%;
                    animation: float ${Math.random() * 3 + 2}s ease-in-out infinite;
                    animation-delay: ${Math.random() * 2}s;
                "></div>
            `).join('');
            
            const ingredientsHTML = drink.ingredients.map(ing => 
                `<span class="bg-red-900/50 px-3 py-1 rounded-full text-xs text-yellow-200 border border-yellow-400/30">${ing}</span>`
            ).join('');
            
            display.innerHTML = `
                <div class="bg-gradient-to-br from-red-800/60 to-rose-900/60 backdrop-blur-lg rounded-2xl p-8 mb-6 shadow-2xl border border-yellow-400/30 drink-float">
                    <div class="text-center mb-6">
                        <div class="relative inline-block w-40 h-48 mx-auto mb-4">
                            <div class="absolute inset-0 flex items-end justify-center">
                                <div class="relative w-32 h-40">
                                    <div class="absolute bottom-0 w-full h-36 bg-gradient-to-b ${drink.color} rounded-b-3xl opacity-80 shadow-2xl" style="clip-path: polygon(15% 0%, 85% 0%, 95% 100%, 5% 100%)"></div>
                                    <div class="absolute bottom-0 w-full h-36 bg-gradient-to-tr from-white/40 to-transparent rounded-b-3xl shimmer-anim" style="clip-path: polygon(15% 0%, 85% 0%, 95% 100%, 5% 100%)"></div>
                                    <div class="absolute top-0 w-full h-3 bg-gradient-to-b from-white/60 to-white/20 rounded-t-lg"></div>
                                    ${bubblesHTML}
                                </div>
                            </div>
                            <div class="absolute top-0 right-4">
                                <div class="w-8 h-8 bg-yellow-300/60 rounded-full blur-sm"></div>
                            </div>
                            <div class="absolute right-8 top-0 w-1 h-32 bg-gradient-to-b from-red-300 to-red-400 transform rotate-12 rounded-full shadow-lg"></div>
                            <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-36 h-2 bg-amber-800/40 rounded-full blur-sm"></div>
                        </div>
                        <h2 class="text-3xl font-bold text-yellow-300 mb-2">${drink.name}</h2>
                        <div class="flex flex-wrap justify-center gap-2 mb-4">
                            ${ingredientsHTML}
                        </div>
                    </div>
                    <div class="bg-red-950/50 rounded-xl p-6 border-l-4 border-yellow-400">
                        <p class="text-yellow-100 leading-relaxed text-center italic">
                            "${drink.message}"
                        </p>
                    </div>
                </div>
            `;
            
            display.classList.remove('hidden');
            
            // å„²å­˜ç´€éŒ„
            records.push({
                timestamp: new Date().toLocaleString('zh-TW'),
                mood: mood,
                drink: drink.name,
                message: drink.message
            });
            
            // æ›´æ–°ä¸‹è¼‰æŒ‰éˆ•
            document.getElementById('recordCount').textContent = records.length;
            document.getElementById('downloadSection').classList.remove('hidden');
        }

        // ä¸‹è¼‰è³‡æ–™
        function downloadData() {
            const dataStr = JSON.stringify(records, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `å¿ƒæƒ…é…’é¤¨ç´€éŒ„_${new Date().getTime()}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        // äº‹ä»¶ç›£è½
        document.getElementById('musicBtn').addEventListener('click', toggleMusic);
        
        document.getElementById('submitBtn').addEventListener('click', () => {
            const mood = document.getElementById('moodInput').value.trim();
            if (!mood) return;
            
            const moodType = analyzeMood(mood);
            const drink = drinkRecipes[moodType];
            showDrink(drink, mood);
            
            // æ¸…ç©ºè¼¸å…¥æ¡†
            document.getElementById('moodInput').value = '';
        });
        
        document.getElementById('moodInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                document.getElementById('submitBtn').click();
            }
        });
        
        document.getElementById('downloadBtn').addEventListener('click', downloadData);
        
        // åˆå§‹åŒ–
        initBackground();
    </script>
</body>
</html>